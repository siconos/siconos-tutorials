
variables:
  # Default ctest model. Warning : overwritten if set in schedules variables (as we expect)
  ctest_build_model: Continuous
  # Default behavior regarding cdash submission
  cdash_submit: 0

# -- Template for examples build-test-install jobs --
# - Pull an image (possibly from siconos-tutorials registry)
#   named  IMAGE_NAME
.examples-build:
  image: $IMAGE_NAME
  stage: test
  variables:
    SICONOS_INSTALL_DIR: /home/install-siconos # where to find siconos binary
    CMAKE_PREFIX_PATH: $SICONOS_INSTALL_DIR  # required by cmake to find siconos-config
  script:
    - sh ci_gitlab/build_and_run_examples.sh

# examples, on debian-buster with a standard (default)
# Siconos installation.
run-examples:debian-buster:
  variables:
    IMAGE_NAME: $CI_REGISTRY/nonsmooth/siconos/siconos-master-debian-buster
    cdash_submit: 1
  extends: .examples-build
